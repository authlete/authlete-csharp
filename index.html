<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Authlete: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Authlete
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview </h2>
<p>This is a C# library for <a href="https://docs.authlete.com/">Authlete Web APIs</a>.</p>
<p><a href="https://www.authlete.com/">Authlete</a> is a cloud service that provides an implementation of <a href="https://tools.ietf.org/html/rfc6749">OAuth 2.0</a> &amp; <a href="https://openid.net/connect/">OpenID Connect</a>. By using the Web APIs provided by Authlete, you can develop a <em>DB-less</em> authorization server and/or OpenID provider. "DB-less" here means that you don't have to manage a database server that stores authorization data (e.g. access tokens), settings of authorization servers and settings of client applications. These data are stored in the Authlete server on cloud.</p>
<p>Please read <em><a href="https://medium.com/@darutk/new-architecture-of-oauth-2-0-and-openid-connect-implementation-18f408f9338d">New Architecture of OAuth 2.0 and OpenID Connect Implementation</a></em> for details about the architecture of Authlete. True engineers will love the architecture ;-)</p>
<blockquote class="doxtable">
<p>The primary advantage of this architecture is in that the backend service can focus on implementing OAuth 2.0 and OpenID Connect without caring about other components such as identity management, user authentication, login session management, API management and fraud detection. And, consequently, it leads to another major advantage which enables the backend service (implementation of OAuth 2.0 and OpenID Connect) to be combined with any solution of other components and thus gives flexibility to frontend server implementations. </p>
</blockquote>
<h2>License </h2>
<p>Apache License, Version 2.0</p>
<h2>Source Code (authlete-csharp) </h2>
<p><code><a href="https://github.com/authlete/authlete-csharp">https://github.com/authlete/authlete-csharp</a></code></p>
<h2>API Reference (authlete-csharp) </h2>
<p><code><a href="https://authlete.github.io/authlete-csharp/">https://authlete.github.io/authlete-csharp/</a></code></p>
<h2>API Reference (Authlete) </h2>
<p><code><a href="https://docs.authlete.com/">https://docs.authlete.com/</a></code></p>
<h2>NuGet </h2>
<p><a href="https://www.nuget.org/packages/Authlete.Authlete">Authlete.Authlete</a></p>
<h2>Samples </h2>
<ul>
<li><a href="https://github.com/authlete/csharp-oauth-server">csharp-oauth-server</a> - Authorization server</li>
<li><a href="https://github.com/authlete/csharp-resource-server">csharp-resource-server</a> - Resource server</li>
<li><a href="https://medium.com/@darutk/oauth-2-0-and-openid-connect-implementation-in-c-authlete-8a8f9efc9361">OAuth 2.0 and OpenID Connect implementation in C# (Authlete)</a> - Article about the two servers above</li>
</ul>
<h2>Description </h2>
<h4>How To Get IAuthleteApi</h4>
<p>All the methods to communicate with <a href="https://docs.authlete.com/">Authlete Web APIs</a> are gathered in <code>IAuthleteApi</code> interface. Currently, <code>AuthleteApi</code> class is the only class that implements the interface.</p>
<p>The constructor of <code>AuthleteApi</code> class requires an implementation of <code>IAuthleteConfiguration</code> interface. Once you prepare an implementation of <code>IAuthleteConfiguration</code> interface, you can create an <code>AuthleteApi</code> instance as follows.</p>
<div class="fragment"><div class="line">// Prepare configuration to access Authlete Web APIs.</div><div class="line">IAuthleteConfiguration conf = ...;</div><div class="line"></div><div class="line">// Create an instance that implements IAuthleteApi.</div><div class="line">IAuthleteApi api = new AuthleteApi(conf);</div></div><!-- fragment --><p><code>IAuthleteConfiguration</code> is an interface that holds configuration values to access Authlete Web APIs such as the URL of an Authlete server and API credentials of a service. To be concrete, the interface has the following properties.</p>
<table class="doxtable">
<tr>
<th align="left">Property </th><th align="left">Description  </th></tr>
<tr>
<td align="left"><code>BaseUrl</code> </td><td align="left">URL of an Authlete server </td></tr>
<tr>
<td align="left"><code>ServiceApiKey</code> </td><td align="left">API key of a service </td></tr>
<tr>
<td align="left"><code>ServiceApiSecret</code> </td><td align="left">API secret of a service </td></tr>
<tr>
<td align="left"><code>ServiceOwnerApiKey</code> </td><td align="left">API key of your account </td></tr>
<tr>
<td align="left"><code>ServiceOwnerApiSecret</code> </td><td align="left">API secret of your account </td></tr>
</table>
<p>authlete-csharp includes three implementations of <code>IAuthleteConfiguration</code> interface as listed below.</p>
<table class="doxtable">
<tr>
<th align="left">Class </th><th align="left">Description  </th></tr>
<tr>
<td align="left"><code>AuthleteEnvConfiguration</code> </td><td align="left">Configuration by environment variables </td></tr>
<tr>
<td align="left"><code>AuthletePropertiesConfiguration</code> </td><td align="left">Configuration by a properties file </td></tr>
<tr>
<td align="left"><code>AuthleteSimpleConfiguration</code> </td><td align="left">Configuration by C# properties </td></tr>
</table>
<h4>AuthletePropertiesConfiguration</h4>
<p>Among the three implementations of <code>IAuthleteConfiguration</code> interface, this section explains <code>AuthletePropertiesConfiguration</code> class.</p>
<p><code>AuthletePropertiesConfiguration</code> class provides a mechanism to use a properties file to set configuration values to access Authlete Web APIs. <em>Properties file</em> here is a kind of configuration files used in Java world. The specification of the file format is described in the <a href="https://docs.oracle.com/javase/9/docs/api/java/util/Properties.html#load-java.io.Reader-">JavaDoc</a> of <code>java.util.Properties.load(java.io.Reader)</code>. authlete-csharp includes an implementation that can interpret the format (<code>Authlete.Util.PropertiesLoader</code>).</p>
<p><code>AuthletePropertiesConfiguration</code> class has three constructors. The following examples show the usage of the constructors.</p>
<div class="fragment"><div class="line">// (1) Constructor with no argument. This tries to read a file</div><div class="line">//     named &quot;authlete.properties&quot;. The environment variable,</div><div class="line">//     AUTHLETE_CONFIGURATION_FILE, can be used to specify</div><div class="line">//     another different file name.</div><div class="line">IAuthleteConfiguration conf =</div><div class="line">    new AuthletePropertiesConfiguration();</div><div class="line"></div><div class="line">// (2) Constructor with the name of a configuration file.</div><div class="line">IAuthleteConfiguration conf =</div><div class="line">    new AuthletePropertiesConfiguration(&quot;authlete.properties&quot;);</div><div class="line"></div><div class="line">// (3) Constructor with a TextReader.</div><div class="line">using (TextReader reader = File.OpenText(&quot;authlete.properties&quot;))</div><div class="line">{</div><div class="line">    IAuthleteConfiguration conf =</div><div class="line">        new AuthletePropertiesConfiguration(reader);</div><div class="line">}</div></div><!-- fragment --><p><code>AuthletePropertiesConfiguration</code> class expects entries in the table below to be found in the given configuration file.</p>
<table class="doxtable">
<tr>
<th align="left">Property Key </th><th align="left">Description  </th></tr>
<tr>
<td align="left"><code>base_url</code> </td><td align="left">URL of an Authlete server </td></tr>
<tr>
<td align="left"><code>service.api_key</code> </td><td align="left">API key of a service </td></tr>
<tr>
<td align="left"><code>service.api_secret</code> </td><td align="left">API secret of a service </td></tr>
<tr>
<td align="left"><code>service_owner.api_key</code> </td><td align="left">API key of your account </td></tr>
<tr>
<td align="left"><code>service_owner.api_secret</code> </td><td align="left">API secret of your account </td></tr>
</table>
<p>Below is an example of a configuration file.</p>
<div class="fragment"><div class="line">base_url                 = https://api.authlete.com</div><div class="line">service_owner.api_key    = 1532787510</div><div class="line">service_owner.api_secret = 9Y0ZARGatedJRhsYLNfiK_aKQIBCug2O3JQU6srZrpk</div><div class="line">service.api_key          = 9463955934</div><div class="line">service.api_secret       = AAw0rner_wjRCpk-y1A6J9s20Bvez3GxEBoL9jOJVR0</div></div><!-- fragment --><h4>IAuthleteApi Settings</h4>
<p><code>Settings</code> property of <code>IAuthleteApi</code> returns an instance of <code>ISettings</code> interface whereby you can adjust the behaviors of the implementation of <code>IAuthleteApi</code> interface.</p>
<div class="fragment"><div class="line">// Get an implementation of IAuthleteApi interface.</div><div class="line">IAuthleteApi api = ...;</div><div class="line"></div><div class="line">// Get the instance which holds settings of the implementation.</div><div class="line">ISettings settings = api.Setting;</div><div class="line"></div><div class="line">// Set a network timeout.</div><div class="line">//</div><div class="line">// In the current implementation, the value set to the Timeout</div><div class="line">// property is passed to HttpClient.Timeout.</div><div class="line">//</div><div class="line">settings.Timeout = TimeSpan.FromSeconds(5);</div></div><!-- fragment --><h4>IAuthleteApi Method Categories</h4>
<p>Methods in the <code>IAuthleteApi</code> interface can be divided into some categories.</p>
<ol type="1">
<li>Methods for Authorization Endpoint Implementation<ul>
<li><code>Authorization(AuthorizationRequest request)</code></li>
<li><code>AuthorizationFail(AuthorizationFailRequest request)</code></li>
<li><code>AuthorizationIssue(AuthorizationIssueRequest request)</code></li>
</ul>
</li>
<li>Methods for Token Endpoint Implementation<ul>
<li><code>Token(TokenRequest request)</code></li>
<li><code>TokenFail(TokenFailRequest request)</code></li>
<li><code>TokenIssue(TokenIssueRequest request)</code></li>
</ul>
</li>
<li>Methods for Service Management<ul>
<li><code>CreateService(Service service)</code></li>
<li><code>DeleteService(long serviceApiKey)</code></li>
<li><code>GetService(long serviceApiKey)</code></li>
<li><code>GetServiceList()</code></li>
<li><code>GetServiceList(int start, int end)</code></li>
<li><code>UpdateService(Service service)</code></li>
</ul>
</li>
<li>Methods for Client Application Management<ul>
<li><code>CreateClient(Client client)</code></li>
<li><code>DeleteClient(long clientId)</code></li>
<li><code>GetClient(long clientId)</code></li>
<li><code>GetClientList()</code></li>
<li><code>GetClientList(string developer)</code></li>
<li><code>GetClientList(int start, int end)</code></li>
<li><code>GetClientList(string developer, int start, int end)</code></li>
<li><code>UpdateClient(Client client)</code></li>
<li><code>RefreshClientSecret(long clientId)</code></li>
<li><code>RefreshClientSecret(string clientIdentifier)</code></li>
<li><code>UpdateClientSecret(long clientId, string clientSecret)</code></li>
<li><code>UpdateClientSecret(string clientIdentifier, string clientSecret)</code></li>
</ul>
</li>
<li>Methods for Access Token Introspection<ul>
<li><code>Introspection(IntrospectionRequest request)</code></li>
<li><code>StandardIntrospection(StandardIntrospectionRequest request)</code></li>
</ul>
</li>
<li>Methods for Revocation Endpoint Implementation<ul>
<li><code>Revocation(RevocationRequest request)</code></li>
</ul>
</li>
<li>Methods for User Info Endpoint Implementation<ul>
<li><code>Userinfo(UserInfoRequest request)</code></li>
<li><code>UserinfoIssue(UserInfoIssueRequest request)</code></li>
</ul>
</li>
<li>Methods for JWK Set Endpoint Implementation<ul>
<li><code>GetServiceJwks()</code></li>
<li><code>GetServiceJwks(bool pretty, bool includePrivateKeys)</code></li>
</ul>
</li>
<li>Methods for OpenID Connect Discovery<ul>
<li><code>GetServiceConfiguration()</code></li>
<li><code>GetServiceConfiguration(bool pretty)</code></li>
</ul>
</li>
<li>Methods for Token Operations<ul>
<li><code>TokenCreate(TokenCreateRequest request)</code></li>
<li><code>TokenUpdate(TokenUpdateRequest request)</code></li>
</ul>
</li>
<li>Methods for Records of Granted Scopes<ul>
<li><code>GetGrantedScopes(long clientId, string subject)</code></li>
<li><code>DeleteGrantedScopes(long clientId, string subject)</code></li>
</ul>
</li>
<li>Methods for Authorization Management on a User-Client Combination Basis<ul>
<li><code>DeleteClientAuthorization(long clientId, string subject)</code></li>
<li><code>GetClientAuthorizationList(ClientAuthorizationGetListRequest request)</code></li>
<li><code>UpdateClientAuthorization(long clientId, ClientAuthorizationUpdateRequest request)</code></li>
</ul>
</li>
</ol>
<p><em>Example</em></p>
<p>The following code snippet is an example to get the list of your services. Each service corresponds to an authorization server.</p>
<div class="fragment"><div class="line">// Prepare configuration to access Authlete APIs.</div><div class="line">// AuthleteSimpleConfiguration is used here as one</div><div class="line">// implementation of IAuthleteConfiguration interface.</div><div class="line">// As described above, there are other implementations</div><div class="line">// such as AuthletePropertiesConfiguraiton.</div><div class="line">IAuthleteConfiguration conf = new AuthleteSimpleConfiguration</div><div class="line">{</div><div class="line">    BaseUrl               = &quot;https://api.authlete.com&quot;,</div><div class="line">    ServiceOwnerApiKey    = &quot;1532787510&quot;,</div><div class="line">    ServiceOwnerApiSecret = &quot;9Y0ZARGatedJRhsYLNfiK_aKQIBCug2O3JQU6srZrpk&quot;,</div><div class="line">    ServiceApiKey         = &quot;9463955934&quot;,</div><div class="line">    ServiceApiSecret      = &quot;AAw0rner_wjRCpk-y1A6J9s20Bvez3GxEBoL9jOJVR0&quot;</div><div class="line">};</div><div class="line"></div><div class="line">// Get an implementation of IAuthleteApi interface.</div><div class="line">// Currently, AuthleteApi is the only class that</div><div class="line">// implements the IAuthleteApi interface.</div><div class="line">IAuthleteApi api = new AuthleteApi(conf);</div><div class="line"></div><div class="line">// Get the list of services.</div><div class="line">ServiceListResponse response = await api.GetServiceList();</div></div><!-- fragment --><h4>Handlers</h4>
<p>It is possible to develop an authorization server and/or OpenID provider only with the methods of <code>IAuthleteApi</code> interface, but the task will become much easier if you use utility classes in <code>Authlete.Handler</code> namespace.</p>
<p>You can find the usage of the handlers in <a href="https://github.com/authlete/csharp-oauth-server">csharp-oauth-server</a> and <a href="https://github.com/authlete/csharp-resource-server">csharp-resource-server</a>. They are sample implementations of an authorization server and a resource server. <a href="https://medium.com/@darutk/oauth-2-0-and-openid-connect-implementation-in-c-authlete-8a8f9efc9361">OAuth 2.0 and OpenID Connect implementation in C# (Authlete)</a> is an article about the two sample servers.</p>
<h2>How To Test </h2>
<pre class="fragment">$ cd Authlete.Tests
$ dotnet test
</pre><h2>How To Release </h2>
<h4>1. Update Documents</h4>
<p>Update <code>CHANGES.md</code> and <code>CHANGES.ja.md</code>. Update <code>README.md</code> and <code>README.ja.md</code>, too, if necessary.</p>
<h4>2. Update Version</h4>
<p>In Visual Studio, open "Options" menu of the <code>Authlete</code> project. In the window titled "Project Options - Authlete", go to "NuGet Package" -&gt; "Metadata" -&gt; "General" tab. Update the value in the "Version:" field.</p>
<p>Or, edit the value of <code>&lt;PackageVersion&gt;</code> in <code>Authlete/Authlete.csproj</code> file directly.</p>
<h4>3. Commit Version</h4>
<pre class="fragment">$ git add Authlete/Authlete.csproj
$ git commit -m 'Updated PackageVersion to X.Y.Z.'
$ git push
</pre><h4>4. Generate Package</h4>
<pre class="fragment">$ dotnet pack
</pre><p>A <code>.nupkg</code> file will be created under <code>bin/Debug</code> directory.</p>
<h4>5. Publish Package</h4>
<pre class="fragment">$ nuget push bin/Debug/Authlete.Authlete.X.Y.Z.nupkg $KEY \
    -Source https://api.nuget.org/v3/index.json
</pre><p>The value of <code>$KEY</code> on the command line is an API key issued by nuget.org. See <a href="https://docs.microsoft.com/en-us/nuget/create-packages/publish-a-package">Publishing packages</a> for details.</p>
<p>The published package will appear at <a href="https://www.nuget.org/packages/Authlete.Authlete,">https://www.nuget.org/packages/Authlete.Authlete,</a> but it will take some minutes.</p>
<h4>6. Update API Reference</h4>
<pre class="fragment">$ cd ..
$ rm -rf html
$ doxygen
</pre><h4>7. Publish API Reference</h4>
<pre class="fragment">$ mkdir -p ../docs
$ cd ../docs
$ git clone https://github.com/authlete/authlete-csharp
$ cd authlete-csharp
$ git checkout gh-pages
$ rm -rf *
$ cp -r ../../authlete-csharp/html/* .
$ git add .
$ git commit -m 'Updated for version X.Y.Z'
$ git push origin gh-pages
</pre><h2>Contact </h2>
<table class="doxtable">
<tr>
<th align="left">Purpose </th><th align="left">Email Address  </th></tr>
<tr>
<td align="left">General </td><td align="left"><a href="#" onclick="location.href='mai'+'lto:'+'inf'+'o@'+'aut'+'hl'+'ete'+'.c'+'om'; return false;">info@<span style="display: none;">.nosp@m.</span>auth<span style="display: none;">.nosp@m.</span>lete.<span style="display: none;">.nosp@m.</span>com</a> </td></tr>
<tr>
<td align="left">Sales </td><td align="left"><a href="#" onclick="location.href='mai'+'lto:'+'sal'+'es'+'@au'+'th'+'let'+'e.'+'com'; return false;">sales<span style="display: none;">.nosp@m.</span>@aut<span style="display: none;">.nosp@m.</span>hlete<span style="display: none;">.nosp@m.</span>.com</a> </td></tr>
<tr>
<td align="left">PR </td><td align="left"><a href="#" onclick="location.href='mai'+'lto:'+'pr@'+'au'+'thl'+'et'+'e.c'+'om'; return false;">pr@au<span style="display: none;">.nosp@m.</span>thle<span style="display: none;">.nosp@m.</span>te.co<span style="display: none;">.nosp@m.</span>m</a> </td></tr>
<tr>
<td align="left">Technical </td><td align="left"><a href="#" onclick="location.href='mai'+'lto:'+'sup'+'po'+'rt@'+'au'+'thl'+'et'+'e.c'+'om'; return false;">suppo<span style="display: none;">.nosp@m.</span>rt@a<span style="display: none;">.nosp@m.</span>uthle<span style="display: none;">.nosp@m.</span>te.c<span style="display: none;">.nosp@m.</span>om</a> </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
