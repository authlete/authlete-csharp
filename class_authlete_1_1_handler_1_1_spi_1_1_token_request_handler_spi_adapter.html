<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Authlete: TokenRequestHandlerSpiAdapter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Authlete
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_authlete_1_1_handler_1_1_spi_1_1_token_request_handler_spi_adapter.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_authlete_1_1_handler_1_1_spi_1_1_token_request_handler_spi_adapter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TokenRequestHandlerSpiAdapter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>An empty implementation of the <code>ITokenRequestHandlerSpi</code> interface.  
 <a href="class_authlete_1_1_handler_1_1_spi_1_1_token_request_handler_spi_adapter.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for TokenRequestHandlerSpiAdapter:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_authlete_1_1_handler_1_1_spi_1_1_token_request_handler_spi_adapter.png" usemap="#TokenRequestHandlerSpiAdapter_map" alt=""/>
  <map id="TokenRequestHandlerSpiAdapter_map" name="TokenRequestHandlerSpiAdapter_map">
<area href="interface_authlete_1_1_handler_1_1_spi_1_1_i_token_request_handler_spi.html" title="Service Provider Interface for TokenRequestHandler. " alt="ITokenRequestHandlerSpi" shape="rect" coords="0,0,198,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4551bdb0cf24386cc5fa9dfdee27d494"><td class="memItemLeft" align="right" valign="top">virtual string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authlete_1_1_handler_1_1_spi_1_1_token_request_handler_spi_adapter.html#a4551bdb0cf24386cc5fa9dfdee27d494">AuthenticateUser</a> (string username, string password)</td></tr>
<tr class="memdesc:a4551bdb0cf24386cc5fa9dfdee27d494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authenticate an end-user.  <a href="#a4551bdb0cf24386cc5fa9dfdee27d494">More...</a><br /></td></tr>
<tr class="separator:a4551bdb0cf24386cc5fa9dfdee27d494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a302ed9eda8cdc736da499fc5a540e8c4"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="class_authlete_1_1_dto_1_1_property.html">Property</a> []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_authlete_1_1_handler_1_1_spi_1_1_token_request_handler_spi_adapter.html#a302ed9eda8cdc736da499fc5a540e8c4">GetProperties</a> ()</td></tr>
<tr class="memdesc:a302ed9eda8cdc736da499fc5a540e8c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get arbitrary key-value pairs to be associated with an access token.  <a href="#a302ed9eda8cdc736da499fc5a540e8c4">More...</a><br /></td></tr>
<tr class="separator:a302ed9eda8cdc736da499fc5a540e8c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An empty implementation of the <code>ITokenRequestHandlerSpi</code> interface. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a4551bdb0cf24386cc5fa9dfdee27d494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4551bdb0cf24386cc5fa9dfdee27d494">&#9670;&nbsp;</a></span>AuthenticateUser()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual string AuthenticateUser </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>password</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Authenticate an end-user. </p>
<p>This method is called only when <a href="https://tools.ietf.org/html/rfc6749#section-4.3">Resource Owner Password Credentials Grant</a> was used. Therefore, if you have no plan to support the flow, always return <code>null</code>. In most cases, you don't have to support the flow. FYI: <a href="https://tools.ietf.org/html/rfc6749">RFC 6749</a> says <em>"The authorization server should take special care when enabling this grant type and only allow it when other flows are not viable."</em> </p>
<dl class="section return"><dt>Returns</dt><dd>The subject (= unique identifier) of the authenticated end-user. If the pair of <code>username</code> and <code>password</code> is invalid, <code>null</code> should be returned. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">username</td><td>The value of the <code>"username"</code> request parameter of the token request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">password</td><td>The value of the <code>"password"</code> request parameter of the token request. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interface_authlete_1_1_handler_1_1_spi_1_1_i_token_request_handler_spi.html#a8cc648375e8071c135feb30dd2e35e91">ITokenRequestHandlerSpi</a>.</p>

</div>
</div>
<a id="a302ed9eda8cdc736da499fc5a540e8c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a302ed9eda8cdc736da499fc5a540e8c4">&#9670;&nbsp;</a></span>GetProperties()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="class_authlete_1_1_dto_1_1_property.html">Property</a> [] GetProperties </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get arbitrary key-value pairs to be associated with an access token. </p>
<p>Properties returned from this method will appear as top-level entries (unless they are marked as hidden) in a JSON response from the authorization server as shown in <a href="https://tools.ietf.org/html/rfc6749#section-5.1">5.1. Successful Response</a> of <a href="https://tools.ietf.org/html/rfc6749">RFC 6749</a>. </p>
<p>Keys listed below should not be used and they would be ignored on Authlete side even if they were used. It is because they are reserved in <a href="https://tools.ietf.org/html/rfc6749">RFC 6749</a> and <a href="https://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect Core 1.0</a>. </p>
<ul>
<li>
<code>access_token</code> </li>
<li>
<code>token_type</code> </li>
<li>
<code>expires_in</code> </li>
<li>
<code>refresh_token</code> </li>
<li>
<code>scope</code> </li>
<li>
<code>error</code> </li>
<li>
<code>error_description</code> </li>
<li>
<code>error_uri</code> </li>
<li>
<code>id_token</code> </li>
</ul>
<p>Note that there is an upper limit on the total size of properties. On Authlete side, the properties will be (1) converted to a multidimensional string array, (2) converted to JSON, (3) encrypted by AES/CBC/PKCS5Padding, (4) encoded by base64url, and then stored into the database. The length of the resultant string must not exceed 65,535 in bytes. This is the upper limit, but we think it is big enough. </p>
<p>When the value of the <code>"grant_type"</code> parameter of a token request is <code>"authorization_code"</code> or <code>"refresh_token"</code>, properties are merged. Rules are described below. </p>
<ul>
<li>
<p class="startli">grant_type=authorization_code  If the authorization code presented by the client application already has extra properties (this happens if <code>IAuthorizationDecisionHandlerSpi.GetProperties</code> returned extra properties when the authorization code was issued), extra properties returned by this method will be merged into the existing extra properties. Note that the existing extra properties will be overwritten if extra properties returned by this method have the same keys. For example, if an authorization code has two extra properties, <code>a=1</code> and <code>b=2</code>, and if this method returns two extra properties, <code>a=A</code> and <code>c=3</code>, the resultant access token will have three extra properties, <code>a=A</code>, <code>b=2</code> and <code>c=3</code>.  </p>
<p class="endli"></p>
</li>
<li>
grant_type=refresh_token  If the access token associated with the refresh token already has extra properties, extra properties returned by this method will be merged into the existing extra properties. Note that the existing extra properties will be overwritten if extra properties returned by this method have the same keys.   </li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>Arbitrary key-value pairs to be associated with an access token. </dd></dl>

<p>Implements <a class="el" href="interface_authlete_1_1_handler_1_1_spi_1_1_i_token_request_handler_spi.html#ac97276ce567fde54565c144c3758b484">ITokenRequestHandlerSpi</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Authlete/Handler/Spi/TokenRequestHandlerSpiAdapter.cs</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_authlete.html">Authlete</a></li><li class="navelem"><a class="el" href="namespace_authlete_1_1_handler.html">Handler</a></li><li class="navelem"><a class="el" href="namespace_authlete_1_1_handler_1_1_spi.html">Spi</a></li><li class="navelem"><a class="el" href="class_authlete_1_1_handler_1_1_spi_1_1_token_request_handler_spi_adapter.html">TokenRequestHandlerSpiAdapter</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
